<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Home | ChaddarCheese</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <!-- Header (static markup for SEO; dynamic behaviour handled by app) -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html" id="brand">MyPortfolio</a>
      <div class="d-flex align-items-center">
        <a href="projects.html" class="nav-link px-2">Projects</a>
        <a href="work.html" class="nav-link px-2">Experience</a>
        <a href="blog.html" class="nav-link px-2">Blog</a>
        <a href="contact.html" class="nav-link px-2">Contact</a>
        <button id="themeToggle" class="btn ms-2"></button>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <img id="profilePic" src="" alt="profile" class="rounded-circle shadow mb-3" width="150" height="150">
      <h1 id="name" class="fw-bold"></h1>
      <p id="tagline" class="lead text-muted"></p>
      <p id="about" class="mx-auto" style="max-width:600px"></p>

      <div class="btn-group btn-group-lg mt-4" role="group" aria-label="Hero actions">
        <a href="projects.html" class="btn btn-outline-primary">View Projects</a>
        <a href="work.html" class="btn btn-outline-primary">Work Experience</a>
        <a href="contact.html" class="btn btn-outline-secondary">Contact</a>
      </div>
    </div>
  </section>

  <!-- Featured Projects -->
  <section class="container my-5">
    <h2 class="mb-4 text-center">Featured Projects</h2>
    <div class="row g-4" id="projectsRow"></div>
  </section>

  <!-- Footer -->
  <div id="footerContainer"></div>

  <script src="data/data.js"></script>
  <script type="module">
    import { mountPetiteApp } from './js/app-common.js';

    (async () => {
      const app = await mountPetiteApp({
        // page-specific reactive state (empty because we rely on window.App)
      });

      // bind DOMs quickly for non-vue-controlled header (so SEO-friendly)
      const data = window.App || {};
      document.getElementById('brand').textContent = data.name || 'Portfolio';
      document.getElementById('profilePic').src = data.profilePic || '';
      document.getElementById('name').textContent = data.name || '';
      document.getElementById('tagline').textContent = data.tagline || '';
      document.getElementById('about').textContent = data.about || '';

      // projects
      const projectsRow = document.getElementById('projectsRow');
      (data.projects || []).slice(0,3).forEach(p => {
        const col = document.createElement('div'); col.className = 'col-md-4';
        col.innerHTML = `
          <div class="card h-100 shadow-sm">
            <img src="${p.image}" class="card-img-top" alt="${p.title}">
            <div class="card-body">
              <h5 class="card-title">${p.title}</h5>
              <p class="card-text">${p.description}</p>
              <a href="${p.link || '#'}" class="btn btn-primary w-100">View</a>
            </div>
          </div>`;
        projectsRow.appendChild(col);
      });

      // theme button setup
      const themeBtn = document.getElementById('themeToggle');
      function renderThemeBtn(theme) {
        themeBtn.className = theme === 'dark' ? 'btn btn-outline-light ms-2' : 'btn btn-outline-dark ms-2';
        themeBtn.innerHTML = theme === 'dark' ? '<i class="bi bi-sun"></i>' : '<i class="bi bi-moon"></i>';
      }
      renderThemeBtn(app.theme);
      themeBtn.addEventListener('click', () => {
        app.toggleTheme();
        renderThemeBtn(app.theme);
      });

      // footer
      document.getElementById('footerContainer').innerHTML = `
        <footer class="text-center py-4 border-top">
          <small>© ${new Date().getFullYear()} ${data.name} — ${data.email}</small>
        </footer>`;
    })();
  </script>
</body>
</html>
